# 动漫抽帧工具

这是一个专门为动漫视频设计的抽帧工具。本工具使用图像处理技术能够有效地减少重复帧，优化动画播放效果或有助于动漫视频剪辑的朋友补帧等。

## 目录

1. [功能特点](#功能特点)
2. [安装指南](#安装指南)
3. [使用说明](#使用说明)
4. [参数设置](#参数设置)
5. [批量处理](#批量处理)
6. [常见问题](#常见问题)
7. [注意事项](#注意事项)
8. [声明与联系方式](#使用权限与声明)

## 功能特点

- 智能识别并提取帧
- 支持视频倒放处理
- 批量处理多个视频文件
- 自定义参数调整
- 实时处理进度显示
- 自动计算TW插件速度的建议

## 安装指南

### 1. 安装 Python

如果您还没有安装Python，请按照以下步骤操作：

1. 访问 [Python 官方网站](https://www.python.org/downloads/)
2. 下载并安装最新版本的 Python（建议选择 Python 3.8 或更高版本）
3. 安装时，请确保勾选"Add Python to PATH"选项

### 2. 安装必要的库

本程序依赖一些第三方库。需要安装以下库：

- PyQt5：用于图形用户界面
- opencv-python：用于视频和图像处理
- numpy：用于数值计算
- cryptography：用于加密功能
- appdirs：用于处理应用程序目录

可以选择以下两种方式之一进行安装：

#### 方式一：使用程序自带的安装（较慢）

首次运行程序时，它会自动检测并安装所需的库。但是，由于网络原因，这个过程可能会比较慢。（使用加速器或魔法情况大概率会好一些）

#### 方式二：手动安装（推荐，速度更快）

1. 打开命令提示符（CMD）或终端：
   - Windows：按 `Win + R`，输入 `cmd`，然后按回车
   - macOS：打开 "应用程序 > 实用工具 > 终端"
   - Linux：通常可以使用 `Ctrl + Alt + T` 快捷键

2. 在命令行中输入以下命令并执行：

   ```
   pip install -i https://pypi.tuna.tsinghua.edu.cn/simple PyQt5 opencv-python numpy cryptography appdirs
   ```

   这个命令使用了清华大学的镜像源，可以加快下载速度。如果你在中国大陆以外的地区，可以去掉 `-i https://pypi.tuna.tsinghua.edu.cn/simple` 部分。

3. 等待安装完成。如果看到类似 "Successfully installed ..." 的消息，说明安装成功。

注意：这个命令会安装程序所需的所有外部库。如果在运行过程中遇到缺少其他库的错误，可以进行反馈，我会更新安装指令。

如果希望获得更快的下载速度，可以考虑使用网络加速器或其他网络优化工具。


## 使用说明

1. **启动程序**：
   - 找到程序的可执行文件（main.py）
   - 双击运行，或在命令行中输入 `python main.py`（在main文件目录下右键可打开终端）

2. **选择输入视频**：
   - 点击"选择输入视频"按钮
   - 在弹出的文件选择器中，找到并选择要处理的视频文件

3. **设置输出路径**：
   - 选择"自动生成"或"手动选择"
   - 如果选择"手动选择"，点击"选择输出路径"按钮并指定保存位置

4. **调整参数**：
   - 使用滑动条调整阈值、最小变化区域和模糊程度
   - 根据需要勾选或取消勾选"倒放视频"选项

5. **处理视频**：
   - 单个视频处理：点击"处理视频"按钮
   - 批量处理：先添加多个视频到列表中，然后点击"批量处理视频"按钮

6. **查看结果**：
   - 处理完成后，程序会显示保留的帧数和建议的 TW 速度
   - 输出的视频文件将保存在指定的位置

## 参数设置

### 阈值
- 范围：0-30
- 功能：决定多大的变化被认为是显著的
- 建议：
  - 动作快速的动画：0-15
  - 变化缓慢的场景：20-30
  - 一般情况：从2开始调整

### 最小变化区域
- 范围：0-2000像素
- 功能：定义被认为是显著变化的最小区域大小
- 建议：
  - 捕捉细微表情变化：100-300
  - 只关注大幅度动作：1000-2000
  - 一般情况：从100开始调整

### 模糊程度
- 范围：0-30（实际使用时会转换为奇数）
- 功能：在比较帧之前对图像进行模糊处理，减少噪声影响
- 建议：
  - 高质量、低噪声视频：3-7
  - 有些模糊或有噪点的视频：11-15
  - 一般情况：从5开始调整

## 批量处理

1. 点击"添加视频"按钮，选择多个要处理的视频文件
2. 使用"移除选中视频"或"清空列表"按钮管理视频列表
3. 设置好参数后，点击"批量处理视频"按钮
4. 选择输出目录，开始批量处理
5. 等待处理完成，查看结果

## 常见问题

1. **Q: 程序运行时出现"缺少某某模块"的错误或者启动程序后闪退怎么办？**
   A: 这通常是因为某些必要的库没有正确安装。请尝试使用上述的手动安装方法重新安装所需的库。

2. **Q: 处理后的视频看起来不流畅，该怎么调整？**
   A: 尝试降低阈值或减小最小变化区域的值，这样可以保留更多的帧。同时，在TW中使用建议的速度设置可以帮助恢复原视频的流畅度。

3. **Q: 程序处理速度很慢，有什么办法加快吗？**
   A: 处理速度主要取决于使用的计算机性能和视频大小。可以尝试增加阈值和最小变化区域的值，这样可以减少需要处理的帧数，但可能会影响输出质量。

## 注意事项

- 请确保使用的计算机有足够的存储空间来保存处理后的视频文件。
- 处理大文件或高分辨率视频可能需要较长时间，请耐心等待。
- 必要的话，备份原始视频文件，以防意外情况发生。
- 如果使用的计算机配置较低，建议关闭其他占用资源的程序以提高处理效率。
- 使用本程序处理视频时，请遵守相关版权法律和规定。

## 使用权限与声明

本工具由笑颜（XiaoYan）借助AI辅助开发。整个开发过程中没有直接使用任何第三方代码，所有代码均为原创。

使用声明：
1. 本工具供学习和个人使用。
2. 如果您想将本工具或其代码用于商业用途，请事先与开发者联系。
3. 在使用或分享本工具时，请注明：
   "本项目使用/修改自笑颜（XiaoYan）开发的动漫抽帧工具"
4. 本工具为AI辅助开发，可能存在潜在的问题。使用时请自行承担风险。
5. 欢迎对工具进行改进和优化，如有重大改进，请与原作者分享。

联系方式：
- Discord：xy4402
- 电子邮件：3162172880@qq.com

感谢您的理解和支持。让我们一起为开源社区和AI辅助开发贡献力量！

## 开源许可

本项目采用GPLv3（GNU General Public License v3.0）开源许可。这意味着您可以自由地使用、修改和分发本项目，但任何衍生作品都必须以相同的许可证开源。详情请见 [LICENSE](LICENSE) 文件。

## 唠两句

嘿，大家好啊！

我是笑颜，一个刚上高一的学生，平时学习挺忙的。这个小工具是我一时兴起搞出来的，纯粹是为了好玩。因为我对编程比较感兴趣。

要是你觉得这玩小意儿有用的话，那我会很开心的！不过，因为学习考试啥的，我可能没太多时间经常更新。但如果真有不少人在用，我看到大家的建议和反馈，肯定会想办法挤时间来修修补补的。

别太当真啊，就当是个好玩的小东西。有啥想法尽管说，说不定哪天我就给你整上了，嘿嘿。

总之，希望这个小玩意能给喜欢做动漫和看动漫的你们带来一点方便！

-- 笑颜（一个爱瞎捣鼓的高中生）
